"use strict";Element.prototype.on=function(e,t,n){return this.addEventListener(e,t,n),this},HTMLElement.prototype.purePlayer=function(e){var t={format:"video/mp4",video:{"":{src:this.src,subtitles:"link_to_subtitles"}}};e=e||t;for(var n in t)e[n]=void 0!==e[n]?e[n]:t[n];this.style.display="none";var l,o=document.createElement("div"),c=document.createElement("div"),a=document.createElement("source"),i=document.createElement("video"),s=document.createElement("div"),u=document.createElement("div"),r=document.createElement("div"),d=document.createElement("span"),m=document.createElement("div"),p=document.createElement("div"),h=document.createElement("div"),f=document.createElement("div"),v=document.createElement("span"),y=document.createElement("div"),b=document.createElement("ul"),E=document.createElement("li"),N=document.createElement("li"),k=document.createElement("ul"),T=document.createElement("li"),g=document.createElement("ul"),C=document.createElement("li"),w=document.createElement("li"),F=document.createElement("ul"),x=document.createElement("div"),S=document.createElement("div"),P=document.createElement("div"),q=document.createElement("div"),L=document.createElement("div"),M=0,V=!0,z=!1,D={toggleFullScreen:function(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?s.webkitExitFullscreen?s.webkitExitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():s.webkitEnterFullscreen?s.webkitEnterFullscreen():s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.webkitRequestFullscreen&&s.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},convertTime:function(e){var t=Math.floor(e/60/60).toFixed(),n=Math.floor((e-60*t*60)/60).toFixed(),l=(e-60*t*60-60*n).toFixed();return n<10&&(n="0"+n),l<10&&(l="0"+l),t>0?t+":"+n+":"+l:n+":"+l},setVolume:function(e){(e=e||0)>1&&(e=1),e<0&&(e=0),S.className=e>0?"volume-icon":"volume-icon volume-off",i.volume=e,q.style.width=100*i.volume+"%",document.cookie="volume="+e},volumeInc:function(e){e=e||.2,D.setVolume(i.volume+e)},volumeDec:function(e){e=e||.2,D.setVolume(i.volume-e)},toggleMute:function(){i.volume>0?D.setVolume(0):D.setVolume(1)},updatePosition:function(){p.style.width=i.currentTime/i.duration*100+"%",v.innerHTML=D.convertTime(i.currentTime||0)+" / "+D.convertTime(i.duration||0)},rewind:function(e){z=!0,i.paused||i.pause(),e?i.currentTime-=10:i.currentTime+=10,this.updatePosition(),this.showPanel(),V?z=!1:setTimeout(function(){D.rewind(e)},100)},hidePanel:function(){u.className="controls-bar zero-opacity",document.body.style.cursor="none"},showPanel:function(){u.className="controls-bar",document.body.style.cursor="auto",clearTimeout(l),l=setTimeout(D.hidePanel,2e3)}};o.className="facebook_blockG",c.className="preloader",c.appendChild(o),c.appendChild(o.cloneNode(!0)),c.appendChild(o.cloneNode(!0)),a.setAttribute("type",e.format),i.appendChild(a),i.oncontextmenu=function(){return!1},i.on("click",function(){this.paused?this.play():this.pause()}).on("progress",function(){this.buffered.length>0&&(h.style.left=this.buffered.start(0)/this.duration*100+"%",h.style.width=this.buffered.end(this.buffered.length-1)/this.duration*100-parseFloat(h.style.left)+"%")}).on("loadstart",function(){c.style.display="block"}).on("loadeddata",function(){q.style.width=100*this.volume+"%",c.style.display="none",v.innerHTML=D.convertTime(this.currentTime)+" / "+D.convertTime(this.duration)}).on("pause",function(){f.className="play-button"}).on("play",function(){f.className="play-button pause",D.setVolume(document.cookie.replace(/(?:(?:^|.*;\s*)volume\s*\=\s*([^;]*).*$)|^.*$/,"$1"))}).on("timeupdate",function(){this.duration&&D.updatePosition()}).on("dblclick",D.toggleFullScreen).on("touchstart",function(e){1===e.targetTouches.length&&(M=e.targetTouches[0].pageX)}).on("touchmove",function(e){1===e.targetTouches.length&&(V=!1,e.targetTouches[0].pageX>M+20&&!z?D.rewind(!1):e.targetTouches[0].pageX<M-20&&!z&&D.rewind(!0))}).on("touchend",function(){V=!0}),f.className="play-button",f.on("click",function(){i.paused?i.play():i.pause()}),d.className="hovered",v.className="time",p.className="progress-position",h.className="loader",u.className="controls-bar",E.className="selected-speed",E.innerText="x1.0",E.on("click",function(e){e.stopPropagation(),"block"===N.style.display?N.style.display="none":N.style.display="block"}),C.className="selected-quality",C.on("click",function(e){e.stopPropagation(),"block"===w.style.display?w.style.display="none":w.style.display="block"});for(var X=.5;X<=2;X+=.5){var R=T.cloneNode(!0);R.dataset.v=X,R.innerText="x"+(1===X.toString().length?X+".0":X),R.on("click",function(){var e=k.childNodes;[].forEach.call(e,function(e){e.className=""}),i.playbackRate=this.dataset.v,this.className="active",E.innerHTML=this.innerText,N.style.display="none"}),k.appendChild(R)}k.className="speed",k.querySelector('[data-v="1"]').className="active",N.className="speed-box-hidden",N.appendChild(k),S.className="volume-icon",S.on("click",function(){D.toggleMute()}),q.className="volume",P.className="volume-bar",P.appendChild(q),P.on("click",function(e){var t=e.offsetX/this.offsetWidth;D.setVolume(t)}),x.className="volume-box",x.appendChild(S),x.appendChild(P),F.className="quality";for(var $ in e.video){var W=document.createElement("li");W.innerText=$,W.on("click",function(){var t=F.childNodes,n=i.paused,l=i.currentTime;[].forEach.call(t,function(e){e.className=""}),this.className="active",C.innerText=this.innerText,a.setAttribute("src",e.video[this.innerText].src),i.src=e.video[this.innerText].src,i.currentTime=l,n||i.play(),w.style.display="none"}),F.appendChild(W)}w.className="quality-box-hidden",w.appendChild(F),g.className="quality-box",g.appendChild(C),g.appendChild(w),b.className="speed-box",b.appendChild(E),b.appendChild(N),L.className="full-size-icon",L.on("click",D.toggleFullScreen),y.className="control-buttons",y.appendChild(b),y.appendChild(g),y.appendChild(x),y.appendChild(L),m.className="progress",m.appendChild(p),m.appendChild(h),r.className="progress-wrap",r.appendChild(d),r.appendChild(m),r.on("click",function(e){i.currentTime=i.duration*e.layerX/(e.target.offsetWidth-e.target.offsetLeft)}).on("mousemove",function(e){d.innerText=D.convertTime((i.duration||0)*e.layerX/(e.target.offsetWidth-e.target.offsetLeft)),d.style.left=e.layerX+e.target.offsetLeft-d.offsetWidth/2+"px"}),u.appendChild(r),u.appendChild(f),u.appendChild(v),u.appendChild(y),s.className="pure-player",s.appendChild(c),s.appendChild(i),s.appendChild(u),s.on("mousemove",D.showPanel).on("click",function(){w.style.display="none",N.style.display="none"}).on("keydown",function(e){switch((e=e||window.event).preventDefault(),e.which||e.keyCode){case 37:i.currentTime-5>0?i.currentTime-=5:i.currentTime=0;break;case 39:i.currentTime+5<i.duration?i.currentTime+=5:i.currentTime=i.duration;break;case 38:D.volumeInc();break;case 40:D.volumeDec();break;case 32:f.click();break;case 77:D.toggleMute()}D.showPanel()}).on("mousewheel",function(e){e.preventDefault(),e.wheelDelta<0?D.volumeDec():D.volumeInc()}),this.parentNode.insertBefore(s,this.parentNode.nextSibling),F.firstChild.click(),D.setVolume(document.cookie.replace(/(?:(?:^|.*;\s*)volume\s*\=\s*([^;]*).*$)|^.*$/,"$1")||1),e.autoplay&&i.play()};